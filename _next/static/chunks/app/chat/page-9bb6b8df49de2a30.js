(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{3483:function(e,n,t){Promise.resolve().then(t.bind(t,38))},1231:function(e,n,t){"use strict";let r;t.d(n,{Z:function(){return i}});var o={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let s=new Uint8Array(16),u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).slice(1));var i=function(e,n,t){if(o.randomUUID&&!n&&!e)return o.randomUUID();let i=(e=e||{}).random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(s)})();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,n){t=t||0;for(let e=0;e<16;++e)n[t+e]=i[e];return n}return function(e,n=0){return u[e[n+0]]+u[e[n+1]]+u[e[n+2]]+u[e[n+3]]+"-"+u[e[n+4]]+u[e[n+5]]+"-"+u[e[n+6]]+u[e[n+7]]+"-"+u[e[n+8]]+u[e[n+9]]+"-"+u[e[n+10]]+u[e[n+11]]+u[e[n+12]]+u[e[n+13]]+u[e[n+14]]+u[e[n+15]]}(i)}},38:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return i}});var r=t(7437),o=t(2265),s=t(5313),u=t(1231);function i(){(0,s.useRouter)();let[e,n]=(0,o.useState)(""),[t,i]=(0,o.useState)(null),[c,d]=(0,o.useState)(""),[l,a]=(0,o.useState)([]);function f(n){"Enter"===n.key&&p(e)}function p(e){e&&""!==e&&(t.send(JSON.stringify({messageType:"CONTENT",message:e,user:{id:c}})),g(e,c),n(""))}function h(e){let n=JSON.parse(e.data),t=n.messageType,r=n.message,o=n.user.id;"CONTENT"===t?g(r,o):"CONNECTION"===t?g("님이 접속하셨습니다.",o):"DISCONNECTION"===t&&g("님이 나가셨습니다.",o)}function m(e){console.log("handleCloseEvent",e),window.location.reload()}function g(e,n){let t=[...l.reverse()];t.push({content:e,senderId:n}),a(t.reverse())}return(0,o.useEffect)(()=>{t&&(window.onkeyup=null,window.onkeyup=f)},[t,e]),(0,o.useEffect)(()=>{t&&(t.onmessage=h,t.onclose=m)},[t,l]),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"Hello, chat"}),c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h3",{children:["당신의 아이디: ",c]}),(0,r.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,r.jsx)("input",{value:e,onChange:e=>n(e.target.value),type:"text"}),(0,r.jsx)("button",{onClick:n=>p(e),children:"보내기"})]}),(0,r.jsx)("div",{children:l.map((e,n)=>(0,r.jsxs)("div",{style:e.senderId===c?{marginBottom:"10px",backgroundColor:"lightgreen"}:{marginBottom:"10px",backgroundColor:"lightblue"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:e.senderId}),":"]}),(0,r.jsx)("div",{children:e.content})]},n))})]}):(0,r.jsx)("button",{onClick:function(){let e=(0,u.Z)();i(new WebSocket("wss://123qweasd.com/ws?userId=".concat(e))),d(e)},children:"채팅방가기"})]})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=3483)}),_N_E=e.O()}]);