(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{3483:function(e,n,t){Promise.resolve().then(t.bind(t,38))},1231:function(e,n,t){"use strict";let o;t.d(n,{Z:function(){return i}});var r={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let s=new Uint8Array(16),u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).slice(1));var i=function(e,n,t){if(r.randomUUID&&!n&&!e)return r.randomUUID();let i=(e=e||{}).random||(e.rng||function(){if(!o&&!(o="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return o(s)})();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,n){t=t||0;for(let e=0;e<16;++e)n[t+e]=i[e];return n}return function(e,n=0){return u[e[n+0]]+u[e[n+1]]+u[e[n+2]]+u[e[n+3]]+"-"+u[e[n+4]]+u[e[n+5]]+"-"+u[e[n+6]]+u[e[n+7]]+"-"+u[e[n+8]]+u[e[n+9]]+"-"+u[e[n+10]]+u[e[n+11]]+u[e[n+12]]+u[e[n+13]]+u[e[n+14]]+u[e[n+15]]}(i)}},38:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return i}});var o=t(7437),r=t(2265),s=t(5313),u=t(1231);function i(){(0,s.useRouter)();let[e,n]=(0,r.useState)(""),[t,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(""),[l,a]=(0,r.useState)([]),[f,p]=(0,r.useState)("CONTENT");function h(n){"Enter"===n.key&&m(e)}function m(e){e&&""!==e&&(t.send(JSON.stringify({messageType:f,message:e,user:{id:c}})),N(e,c),n(""))}function g(e){let n=JSON.parse(e.data),t=n.messageType,o=n.message,r=n.user.id;"CONTENT"===t?N(o,r):"CONNECTION"===t?N("님이 접속하셨습니다.",r):"DISCONNECTION"===t&&N("님이 나가셨습니다.",r)}function y(e){console.log("handleCloseEvent",e),window.location.reload()}function N(e,n){let t=[...l.reverse()];t.push({content:e,senderId:n}),a(t.reverse())}return(0,r.useEffect)(()=>{t&&(window.onkeyup=null,window.onkeyup=h)},[t,e]),(0,r.useEffect)(()=>{t&&(t.onmessage=g,t.onclose=y)},[t,l]),(0,o.jsxs)("div",{children:[(0,o.jsx)("h1",{children:"Hello, chat"}),c?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("p",{children:["현재 모드: ",f]}),(0,o.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,o.jsx)("input",{value:e,onChange:e=>n(e.target.value),type:"text"}),(0,o.jsx)("button",{onClick:n=>m(e),children:"보내기"}),"CONTENT"===f?(0,o.jsx)("button",{onClick:e=>p("TRANSLATE"),children:"모드바꾸기"}):(0,o.jsx)("button",{onClick:e=>p("CONTENT"),children:"모드바꾸기"})]}),(0,o.jsx)("div",{children:l.map((e,n)=>(0,o.jsxs)("div",{style:e.senderId===c?{marginBottom:"10px",backgroundColor:"lightgreen"}:{marginBottom:"10px",backgroundColor:"lightblue"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("b",{children:e.senderId}),":"]}),(0,o.jsx)("div",{children:e.content})]},n))})]}):(0,o.jsx)("button",{onClick:function(){let e=(0,u.Z)();i(new WebSocket("wss://123qweasd.com/ws?userId=".concat(e))),d(e)},children:"채팅방가기"})]})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=3483)}),_N_E=e.O()}]);