(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[929],{3483:function(e,n,t){Promise.resolve().then(t.bind(t,9089))},1231:function(e,n,t){"use strict";let r;t.d(n,{Z:function(){return i}});var o={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let s=new Uint8Array(16),u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).slice(1));var i=function(e,n,t){if(o.randomUUID&&!n&&!e)return o.randomUUID();let i=(e=e||{}).random||(e.rng||function(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)))throw Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(s)})();if(i[6]=15&i[6]|64,i[8]=63&i[8]|128,n){t=t||0;for(let e=0;e<16;++e)n[t+e]=i[e];return n}return function(e,n=0){return u[e[n+0]]+u[e[n+1]]+u[e[n+2]]+u[e[n+3]]+"-"+u[e[n+4]]+u[e[n+5]]+"-"+u[e[n+6]]+u[e[n+7]]+"-"+u[e[n+8]]+u[e[n+9]]+"-"+u[e[n+10]]+u[e[n+11]]+u[e[n+12]]+u[e[n+13]]+u[e[n+14]]+u[e[n+15]]}(i)}},9089:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return u}});var r=t(7437),o=t(2265),s=t(1231);function u(){let[e,n]=(0,o.useState)(""),[t,u]=(0,o.useState)(null),[i,c]=(0,o.useState)(""),[d,l]=(0,o.useState)([]);function a(n){"Enter"===n.key&&f(e)}function f(e){t.send(JSON.stringify({messageType:"CONTENT",message:e,user:{id:i}})),h(e,i),n("")}function p(e){let n=JSON.parse(e.data),t=n.messageType,r=n.message,o=n.user.id;"CONTENT"===t?h(r,o):"CONNECTION"===t?h("님이 접속하셨습니다.",o):"DISCONNECTION"===t&&h("님이 나가셨습니다.",o)}function h(e,n){let t=[...d.reverse()];t.push({content:e,senderId:n}),l(t.reverse())}return(0,o.useEffect)(()=>{t&&(window.onkeyup=null,window.onkeyup=a)},[t,e]),(0,o.useEffect)(()=>{t&&(t.onmessage=p)},[t,d]),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{children:"Hello, chat"}),i?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("h3",{children:["당신의 아이디: ",i]}),(0,r.jsxs)("div",{style:{marginBottom:"10px"},children:[(0,r.jsx)("input",{value:e,onChange:e=>n(e.target.value),type:"text"}),(0,r.jsx)("button",{onClick:n=>f(e),children:"보내기"})]}),(0,r.jsx)("div",{children:d.map((e,n)=>(0,r.jsxs)("div",{style:e.senderId===i?{marginBottom:"10px",backgroundColor:"lightgreen"}:{marginBottom:"10px",backgroundColor:"lightblue"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("b",{children:e.senderId}),":"]}),(0,r.jsx)("div",{children:e.content})]},n))})]}):(0,r.jsx)("button",{onClick:function(){let e=(0,s.Z)();u(new WebSocket("ws://20.190.123.30/ws?userId=".concat(e))),c(e)},children:"채팅방가기"})]})}}},function(e){e.O(0,[971,69,744],function(){return e(e.s=3483)}),_N_E=e.O()}]);